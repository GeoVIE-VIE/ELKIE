# Cowrie Proxy Backend Configuration for T-Pot
#
# This configures Cowrie to:
# 1. Accept SSH connections and log credentials
# 2. Forward authenticated sessions to a real sacrificial VM
# 3. Log all commands in both Cowrie AND the VM
#
# The attacker gets a real shell, you get full visibility.
#

[backend_pool]
# Enable the proxy backend instead of fake shell
enabled = true

# The sacrificial VM to forward sessions to
# Change this IP to your sacrificial VM
backend = ssh://192.168.40.20:22

# Pool settings
pool_size = 10
recycle_period = 3600
nat_public_ip =

[proxy]
# Proxy backend is enabled
backend = pool

# SSH settings for connecting to sacrificial VM
# These are the REAL credentials on the sacrificial VM
backend_ssh_host = 192.168.40.20
backend_ssh_port = 22

# Create a dedicated honeypot user on the VM
backend_user = honeypot
backend_pass = honeypot_backend_pass_change_me

# Alternative: use SSH key (more secure)
# backend_ssh_key = /etc/cowrie/backend_key

# Log the backend session too
log_raw = true

[ssh]
# What Cowrie shows to attackers
version = SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.6

# Enable password auth (for credential harvesting)
enabled = true

# Forward these to the real VM
forward_ssh_enabled = true

[telnet]
# Also proxy telnet if you want
enabled = false

[output_jsonlog]
# Keep logging everything Cowrie sees
enabled = true
logfile = ${honeypot:log_path}/cowrie.json
epoch_timestamp = false
